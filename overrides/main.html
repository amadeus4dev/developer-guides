{% extends "base.html" %}

{% block scripts %}
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        console.log('Script loaded');

        // Initial redirection logic
        if (window.location.hostname === 'amadeus4dev.github.io' || window.location.hostname === 'developer.amadeus.com') {
            console.log('Initial redirection');
            const path = window.location.pathname;
            const redirectPattern = /^\/([^/]+)/;
            const redirectUrl = path.replace(redirectPattern, 'https://developers.amadeus.com/self-service/apis-docs/guides/$1');
            window.location.href = redirectUrl;
        }

        // Event listener for link clicks
        document.body.addEventListener('click', function (event) {
            var target = event.target;
            if (target.tagName === 'A') {
                var href = target.getAttribute('href');
                if (href.includes('developers.amadeus.com')) {
                    event.preventDefault();
                    console.log('Link click redirection');
                    window.location.href = href;
                }
            }
        });
    });
</script>
{% endblock %}
